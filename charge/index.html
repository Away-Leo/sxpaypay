
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>线上充值-首页</title>
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport" />
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="black" name="apple-mobile-web-app-status-bar-style" />
    <meta content="telephone=no" name="format-detection" />
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/md5.js"></script>
</head>
<body>
    <section class="aui-flexView">
        <header class="aui-navBar aui-navBar-fixed">
            
            <div class="aui-center">
                <span class="aui-center-title">充值中心</span>
            </div>
            
        </header>
        <section class="aui-scrollView" id="priceContent">
            
            <div class="aui-blue-box">
                <div class="aui-palace aui-palace-one">
                    <div class="aui-current-box">
                        <a href="javascript:;" class="aui-current-item " amount="1" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>1元</h1>
                                <h3>售价:1元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="100" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>100元</h1>
                                <h3>售价:100元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="150" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>150元</h1>
                                <h3>售价:150元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="200" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>200元</h1>
                                <h3>售价:200元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="300" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>300元</h1>
                                <h3>售价:300元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="400" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>400元</h1>
                                <h3>售价:400元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="500" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>500元</h1>
                                <h3>售价:500元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="600" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>600元</h1>
                                <h3>售价:600元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="700" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>700元</h1>
                                <h3>售价:700元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="800" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>800元</h1>
                                <h3>售价:800元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="900" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>900元</h1>
                                <h3>售价:900元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="1000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>1000元</h1>
                                <h3>售价:1000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="1500" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>1500元</h1>
                                <h3>售价:1500元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="2000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>2000元</h1>
                                <h3>售价:2000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="2500" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>2500元</h1>
                                <h3>售价:2500元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="3000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>3000元</h1>
                                <h3>售价:3000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="4000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>4000元</h1>
                                <h3>售价:4000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="5000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>5000元</h1>
                                <h3>售价:5000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="6000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>6000元</h1>
                                <h3>售价:6000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="7000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>7000元</h1>
                                <h3>售价:7000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="8000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>8000元</h1>
                                <h3>售价:8000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="9000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>9000元</h1>
                                <h3>售价:9000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="10000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>10000元</h1>
                                <h3>售价:10000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="11000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>11000元</h1>
                                <h3>售价:11000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="12000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>12000元</h1>
                                <h3>售价:12000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="13000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>13000元</h1>
                                <h3>售价:13000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="14000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>14000元</h1>
                                <h3>售价:14000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="15000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>15000元</h1>
                                <h3>售价:15000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="16000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>16000元</h1>
                                <h3>售价:16000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="17000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>17000元</h1>
                                <h3>售价:17000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="18000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>18000元</h1>
                                <h3>售价:18000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="19000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>19000元</h1>
                                <h3>售价:19000元</h3>
                            </div>
                        </a>
                        <a href="javascript:;" class="aui-current-item " amount="20000" data-ydui-actionsheet="{target:'#actionSheet',closeElement:'#cancel'}">
                            <div class="aui-current-item-hd">
                                <h1>20000元</h1>
                                <h3>售价:20000元</h3>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
            
        </section>

        <section id="iframecontent"  class="aui-scrollView" style="display:none;position: absolute;top: 45px;height: 850px;">
                <a onclick="hidepay()" style="width: 100px;height: 40px;background-color: red;text-align: center;font-size: 14px;position: absolute;left: 15px;line-height: 40px;
                top: 15px;
                color: white;">关闭此支付页</a>
                <iframe src="" id="payurliframe" height="850px" width="100%" style="overflow: scroll;"></iframe>
        </section>
        
    </section>
    <div class="m-actionsheet" id="actionSheet">
        <div class="aui-show-box">
            <div class="aui-show-box-title aui-footer-flex">
                <div class="aui-flex b-line">
                    <i class="icon icon-close" id="cancel"></i>
                    <div class="aui-flex-box">
                        <h4>确认付款</h4>
                    </div>
                </div>
                <div class="aui-coll-share-box">
                    <input type="hidden" id="amount" />
                    <h1><i id="amountShow">￥10.00</i></h1>
                </div>
                <div class="aui-info-line">
                    <a href="javascript:;" class="aui-flex b-line">
                        <div class="aui-flex-box">
                            <h5>付款方式</h5>
                        </div>
                        <div class="aui-arrow">H5</div>
                    </a>
                </div>
                <div class="aui-coll-cancel">
                    <form  id="form1" method="post" action="http://pay.yanwujing.cn/Pay_Index.html">

                    </form>
                    <a href="javascript:;" id="submit" class="">立即付款</a>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="js/layer.js"></script>
</body>
<script>
var mchCode=getQueryString("code");
var ukey=getQueryString("key");
console.log("mchCode="+mchCode+";key="+ukey);
var params={};
/*
"pay_memberid" => $pay_memberid,
    "pay_orderid" => $pay_orderid,
    "pay_amount" => $pay_amount,
    "pay_applydate" => $pay_applydate,
    "pay_bankcode" => $pay_bankcode,
    "pay_notifyurl" => $pay_notifyurl,
    "pay_callbackurl" => $pay_callbackurl,
*/
var zimu=["A","B","C","D","E","F","G","H","I","J"];

function hidepay(){
    location.href=location.href;
}

$(document).ready(function(){
    $("#submit").click(function () {
        var amount=$("#amount").val();
        params['pay_memberid']=mchCode;
        params['pay_orderid']=zimu[randomNum(0,9)]+""+(new Date()).getTime();
        params['pay_amount']=amount;
        params['pay_applydate']=parseInt(new Date().getTime()/1000);
        params['pay_bankcode']=903;
        params['pay_notifyurl']="http://pay.yanwujing.cn/callback.php";
        params['pay_callbackurl']="http://pay.yanwujing.cn/callback.php";

        var cc = sort_ASCII(params);
        var signStr="";
        for(key in cc){
            console.log(key);
            signStr+=key+"="+cc[key]+"&";
        }
        signStr+="key="+ukey
        var pay_md5sign=hex_md5(signStr);
        console.log(signStr);
        console.log(pay_md5sign.toUpperCase());
        cc['pay_md5sign']=pay_md5sign.toUpperCase();
        cc['pay_attach']=mchCode;
        cc['pay_productname']=mchCode;
        
        $.ajax({
            url:"/Pay_Index.html",
            data:cc,
            contentType:'application/x-www-form-urlencoded',
            type:'post',
            dataType:'text',
            success:function(data){
                
                if(data.indexOf("status") == -1){
                    //window.location.href=data;
                    //iframecontent payurliframe
                    $("#iframecontent").show();
                    //actionSheet priceContent
                    $(".mask-black").hide();
                    $("#actionSheet").hide();
                    $("#priceContent").hide();
                    $("#payurliframe").prop("src",data);

                }else{
                    alert(data);
                }
            }
        });


    });
});

</script>
</html>
